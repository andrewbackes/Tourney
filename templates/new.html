<html>
	<head>
		<title>Admin - New Tourney</title>
		<script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
		<script> var title = "New Tourney"; var eventTitle = "Administrator"; </script>
		<link href="../resources/style.css" rel="stylesheet" type="text/css">
		<style>
			.dashedborder {
				border: 1px dashed #535863;
				border-radius: 5px;
				padding: 15px;
				margin-bottom: 15px;
				color: white;
			}
			h4 {
				margin-top: 2px;
				margin-bottom: 8px;
			}
			.nowrap 	{ display: inline-block; }
			.thin 		{ width: 3em; }
			.medium 	{ width: 5em; }
			.thick 		{ width: 70%; }
			#event {
				width: 600px;
				font-size: 130%;
				font-weight: 100;
			}
			.title {
				font-size: 130%;
				font-weight: 100;
				margin-right: 15px;
			}
			input {
				font-family: Roboto, Helvetica;
			}
			
			.inputbox {
				background: #282E3E;
				border: 1px solid #535863;
				color: white;
				outline: none;
				padding: 3px 0px 3px 3px;
  				margin: 5px 1px 3px 0px;
			}
			.inputbox:focus {
				box-shadow: 0 0 5px white;
				padding: 3px 0px 3px 3px;
				margin: 5px 1px 3px 0px;
			}
			.button {
				height: 70px;
				width: 70px;
				border-radius: 8px;
				font-size: 110%;
				color: white;
			}
			.toggle-bar {
				width: 550px;
				font-family: Roboto, Helvetica;
				font-weight: 100;
				font-size: 80%;
			}
			.toggle-bar div {
				display: inline-block;
				background: #282E3E;
				border: 1px solid #535863;				
				padding: 5px;
				cursor: pointer;
				margin-top: 25px;
				margin-bottom: 25px;
				text-align: center;
			}
			.from-file-button {
				width: 45%;
				border-top-right-radius: 8px;
				border-bottom-right-radius: 8px;
			}
			.from-github-button {
				width: 45%;
				border-top-left-radius: 8px;
				border-bottom-left-radius: 8px;
			}
			.github-form {
				height: 60px;
			}
			.file-form {
				height: 60px;
			}
			.add-engine-entry table {
				width: 520px;
			}
			.add-engine-entry table input {
				width: 100%;
			}
			.delete-engine {
				background-color: #D9534F;
				border-color: #D43F3A;
			}
			.delete-engine:hover {
				background-color: #C92C29;  
				border-color: #AC2925;
			}
			#add-engine {
				background-color: #5CB85C;
				border-color: #398439;
			}
			#add-engine:hover {
				background-color: #449D44;
				border-color: #398439;
			}
			#start-tourney-container {
				text-align: right;
				padding: 0;
				padding-right: 25px;
				height: 70px;
			}
		</style>
		<script id="add-engine-template" type="text/tourney-template">
			<div class="add-engine-entry dashedborder">
				<h4>Engine</h4>
				<table>
					<tr>
						<td class="thincell">
							Gauntlet
							<input type="checkbox" class="gauntlet">
						</td>
						<td>
							<div class="engine-title-bar">
								<table>
									<tr class="trClass">
										<td class="tdClass">Name:</td><td class="tdClass"><input type="text" class="thick inputbox name"></td>
										<td class="tdClass">Protocol:</td><td class="tdClass">
											<select class="inputbox protocol">
												<option value="uci">UCI</option>
												<option value="winboard">WinBoard</option>
											</select>
										</td>
									</tr>
								</table>
							</div>
							
							<div class="toggle-bar">
								<div class="from-github-button" style="background-color: #535863;" onClick="showGithub($(this));">Github </div><div class="from-file-button"onClick="showFromFile($(this));"> From File</div>
							</div>
							
							<div class="github-form">
								<table>
									<tr class="trClass">
										<td class="tdClass" width="100px">Repository (URL):</td><td class="tdClass"><input type="text" class="thick inputbox repo"></td>
									</tr>
									<tr class="trClass">
										<td class="tdClass" width="100px">Branch:</td><td class="tdClass"><input type="text" class="thick inputbox branch"></td>
									</tr>
								</table>
							</div>
							<div class="file-form" style="display: none;">
								<table>
									<tr class="trClass">
										<td class="tdClass" width="100px">File Path:</td><td class="tdClass"><input type="text" class="thick inputbox filepath"></td>
									</tr>
								</table>
							</div>
						</td>
						
						<td class="thincell">
							<button class="delete-engine button" onClick="removeEngine( $( this ) );">-</button>
						</td>
					</tr>
				</table>
			</div>
		</script>
		<script>
			var API_SERVER = "/api/unsafe/"; 
			
			function sendCommand(command) {
				var path = command.replace(" ", "/");
				var req = API_SERVER + path;
				console.log(req);
				$.ajax(req);
			}
			
			function AddEngine() {
				var $template = $( $( document.getElementById( 'add-engine-template' ) ).html() );
				var $container = $( document.getElementById( 'engine-list' ) );
				$container.append( $template );
				
			}
			function removeEngine( $button ) {
				$button.parent().parent().parent().parent().parent().remove();
			}
			
			function showGithub( $button ) {
				var $container = $button.parent().parent(); 
				$container.find('.github-form').show();
				$container.find('.file-form').hide();
				$container.find('.from-github-button').css("background-color", "#535863") ;
				$container.find('.from-file-button').css("background-color", "#282E3E") ;
			}
			function showFromFile( $button ) {
				var $container = $button.parent().parent(); 
				$container.find('.github-form').hide();
				$container.find('.file-form').show();
				$container.find('.from-github-button').css("background-color", "#282E3E") ;
				$container.find('.from-file-button').css("background-color", "#535863") ;
			}
			
			$( document ).ready(function() {
				AddEngine();
			});
			
		</script>
		
	</head>
	<body>
		<div id="main">
			{{ template "_header.html" . }}
			{{ $event := .Event }}
			<div id="content">
				<div class="tourneyname dashedborder">
					<span class="title">Tourney Name:</span> <input type="text" id="event" class="inputbox">
				</div>
				<div class="dashedborder">
					<div class="nowrap">
						<h4>Time Control</h4>
						<table>
							<tr>
								<td>Time/Control:</td>
								<td><input type="text" id="time" class="medium inputbox"> ms</td>
							</tr>
							<tr>						
								<td>Increment:</td>
								<td><input type="text" id="increment" class="medium inputbox"> ms</td>
							</tr>
							<tr>
								<td>Moves/Control:</td>
								<td><input type="text" id="moves" class="thin inputbox"></td>
							</tr>
							<tr>
								<td>Repeating</td>
								<td><input type="checkbox" id="repeating"></td>
							</tr>
						</table>
					</div>
					<div class="nowrap">
						<h4>Opening Book</h4>
						<table>
							<tr>
								<td>Book Filename:</td>
								<td><input type="text" id="booklocation" class="inputbox"></td>
							</tr>
							<tr>
								<td># Book Moves:</td>
								<td><input type="text" id="bookmoves" class="thin inputbox"></td>
							</tr>
							<tr>
								<td>Randomize Book:</td>
								<td><input type="checkbox" id="randombook"></td>
							</tr>
							<tr>
								<td>Mirror Positions:</td>
								<td><input type="checkbox" id="bookmirroring"></td>
							</tr>
						</table>
					</div>
					<div class="nowrap">
						<h4>Logistics</h4>
						<table>
							<tr>
								<td>Rounds:</td>
								<td><input type="text" id="rounds" class="thin inputbox"></td>
							</tr>
							<tr>
								<td>Gauntlet Seats:</td>
								<td><input type="text" id="testseats" class="thin inputbox"></td>
							</tr>
							<tr>
								<td>Carousel:</td>
								<td><input type="checkbox" id="carousel"></td>
							</tr>
						</table>
					</div>
				</div>
				<div id="engine-list">
					
				</div>
				
				<div id="addengines">
					<button id="add-engine" onClick="AddEngine();" class="button">+</button>
				</div>
				<div id="start-tourney-container">
					<button id="queue-tourney" onClick="queueTourney();" class="button tourney-button">Queue</button>
					<button id="start-tourney" onClick="startTourney();" class="button tourney-button">Start</button>
				</div>
			</div>
		</div>
		{{ template "_footer.html" . }}
		<script type="text/javascript" src="../resources/styletables.js"></script>
	</body>
</html>